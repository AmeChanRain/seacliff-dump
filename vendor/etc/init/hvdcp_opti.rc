on fs
    mkdir /persist/hvdcp_opti 0770 root system

on boot
    chown system system /sys/class/power_supply/battery/capacity
    chown system system /sys/class/power_supply/battery/charge_control_limit
    chown system system /sys/class/power_supply/battery/charge_control_limit_max
    chown system system /sys/class/power_supply/battery/charge_counter
    chown system system /sys/class/power_supply/battery/charge_done
    chown system system /sys/class/power_supply/battery/charge_full
    chown system system /sys/class/power_supply/battery/charge_term_current
    chown system system /sys/class/power_supply/battery/charge_type
    chown system system /sys/class/power_supply/battery/charger_temp
    chown system system /sys/class/power_supply/battery/charger_temp_max
    chown system system /sys/class/power_supply/battery/constant_charge_current
    chown system system /sys/class/power_supply/battery/constant_charge_current_max
    chown system system /sys/class/power_supply/battery/current_now
    chown system system /sys/class/power_supply/battery/current_qnovo
    chown system system /sys/class/power_supply/battery/cycle_count
    chown system system /sys/class/power_supply/battery/device
    chown system system /sys/class/power_supply/battery/die_health
    chown system system /sys/class/power_supply/battery/dp_dm
    chown system system /sys/class/power_supply/battery/fcc_stepper_enable
    chown system system /sys/class/power_supply/battery/force_recharge
    chown system system /sys/class/power_supply/battery/health
    chown system system /sys/class/power_supply/battery/input_current_limited
    chown system system /sys/class/power_supply/battery/input_suspend
    chown system system /sys/class/power_supply/battery/parallel_disable
    chown system system /sys/class/power_supply/battery/power
    chown system system /sys/class/power_supply/battery/present
    chown system system /sys/class/power_supply/battery/recharge_soc
    chown system system /sys/class/power_supply/battery/rerun_aicl
    chown system system /sys/class/power_supply/battery/set_ship_mode
    chown system system /sys/class/power_supply/battery/status
    chown system system /sys/class/power_supply/battery/step_charging_enabled
    chown system system /sys/class/power_supply/battery/subsystem
    chown system system /sys/class/power_supply/battery/sw_jeita_enabled
    chown system system /sys/class/power_supply/battery/technology
    chown system system /sys/class/power_supply/battery/temp
    chown system system /sys/class/power_supply/battery/type
    chown system system /sys/class/power_supply/battery/uevent
    chown system system /sys/class/power_supply/battery/voltage_max
    chown system system /sys/class/power_supply/battery/voltage_now
    chown system system /sys/class/power_supply/battery/voltage_qnovo

    chown system system /sys/class/power_supply/bms/batt_age_level
    chown system system /sys/class/power_supply/bms/battery_type
    chown system system /sys/class/power_supply/bms/calibrate
    chown system system /sys/class/power_supply/bms/capacity
    chown system system /sys/class/power_supply/bms/capacity_raw
    chown system system /sys/class/power_supply/bms/cc_soc
    chown system system /sys/class/power_supply/bms/cc_step
    chown system system /sys/class/power_supply/bms/cc_step_sel
    chown system system /sys/class/power_supply/bms/charge_counter
    chown system system /sys/class/power_supply/bms/charge_counter_shadow
    chown system system /sys/class/power_supply/bms/charge_full
    chown system system /sys/class/power_supply/bms/charge_full_design
    chown system system /sys/class/power_supply/bms/charge_now
    chown system system /sys/class/power_supply/bms/charge_now_raw
    chown system system /sys/class/power_supply/bms/clear_soh
    chown system system /sys/class/power_supply/bms/constant_charge_voltage
    chown system system /sys/class/power_supply/bms/current_avg
    chown system system /sys/class/power_supply/bms/current_now
    chown system system /sys/class/power_supply/bms/cycle_count
    chown system system /sys/class/power_supply/bms/cycle_counts
    chown system system /sys/class/power_supply/bms/debug_battery
    chown system system /sys/class/power_supply/bms/device
    chown system system /sys/class/power_supply/bms/esr_actual
    chown system system /sys/class/power_supply/bms/esr_nominal
    chown system system /sys/class/power_supply/bms/power
    chown system system /sys/class/power_supply/bms/power_avg
    chown system system /sys/class/power_supply/bms/power_now
    chown system system /sys/class/power_supply/bms/real_capacity
    chown system system /sys/class/power_supply/bms/resistance
    chown system system /sys/class/power_supply/bms/resistance_id
    chown system system /sys/class/power_supply/bms/scale_mode_en
    chown system system /sys/class/power_supply/bms/soc_reporting_ready
    chown system system /sys/class/power_supply/bms/soh
    chown system system /sys/class/power_supply/bms/subsystem
    chown system system /sys/class/power_supply/bms/temp
    chown system system /sys/class/power_supply/bms/time_to_empty_avg
    chown system system /sys/class/power_supply/bms/time_to_full_avg
    chown system system /sys/class/power_supply/bms/type
    chown system system /sys/class/power_supply/bms/uevent
    chown system system /sys/class/power_supply/bms/voltage_avg
    chown system system /sys/class/power_supply/bms/voltage_max_design
    chown system system /sys/class/power_supply/bms/voltage_now
    chown system system /sys/class/power_supply/bms/voltage_ocv

    chown system system /sys/class/power_supply/usb/adapter_cc_mode
    chown system system /sys/class/power_supply/usb/boost_current
    chown system system /sys/class/power_supply/usb/connector_health
    chown system system /sys/class/power_supply/usb/connector_type
    chown system system /sys/class/power_supply/usb/ctm_current_max
    chown system system /sys/class/power_supply/usb/current_max
    chown system system /sys/class/power_supply/usb/device
    chown system system /sys/class/power_supply/usb/hvdcp_opti_allowed
    chown system system /sys/class/power_supply/usb/hw_current_max
    chown system system /sys/class/power_supply/usb/input_current_now
    chown system system /sys/class/power_supply/usb/input_current_settled
    chown system system /sys/class/power_supply/usb/low_power
    chown system system /sys/class/power_supply/usb/moisture_detected
    chown system system /sys/class/power_supply/usb/online
    chown system system /sys/class/power_supply/usb/pd_active
    chown system system /sys/class/power_supply/usb/pd_current_max
    chown system system /sys/class/power_supply/usb/pd_voltage_max
    chown system system /sys/class/power_supply/usb/pd_voltage_min
    chown system system /sys/class/power_supply/usb/pe_start
    chown system system /sys/class/power_supply/usb/power
    chown system system /sys/class/power_supply/usb/present
    chown system system /sys/class/power_supply/usb/qc_opti_disable
    chown system system /sys/class/power_supply/usb/real_type
    chown system system /sys/class/power_supply/usb/scope
    chown system system /sys/class/power_supply/usb/skin_health
    chown system system /sys/class/power_supply/usb/smb_en_mode
    chown system system /sys/class/power_supply/usb/smb_en_reason
    chown system system /sys/class/power_supply/usb/subsystem
    chown system system /sys/class/power_supply/usb/therm_icl_limit
    chown system system /sys/class/power_supply/usb/type
    chown system system /sys/class/power_supply/usb/typec_cc_orientation
    chown system system /sys/class/power_supply/usb/typec_mode
    chown system system /sys/class/power_supply/usb/typec_power_role
    chown system system /sys/class/power_supply/usb/uevent
    chown system system /sys/class/power_supply/usb/voltage_max
    chown system system /sys/class/power_supply/usb/voltage_max_design
    chown system system /sys/class/power_supply/usb/voltage_max_limit
    chown system system /sys/class/power_supply/usb/voltage_now
    chown system system /sys/class/power_supply/usb/voltage_vph

    chown system system /sys/class/usbpd/usbpd0/contract
    chown system system /sys/class/usbpd/usbpd0/current_dr
    chown system system /sys/class/usbpd/usbpd0/current_pr
    chown system system /sys/class/usbpd/usbpd0/device
    chown system system /sys/class/usbpd/usbpd0/get_battery_cap
    chown system system /sys/class/usbpd/usbpd0/get_battery_status
    chown system system /sys/class/usbpd/usbpd0/get_pps_status
    chown system system /sys/class/usbpd/usbpd0/get_src_cap_ext
    chown system system /sys/class/usbpd/usbpd0/get_status
    chown system system /sys/class/usbpd/usbpd0/hard_reset
    chown system system /sys/class/usbpd/usbpd0/initial_dr
    chown system system /sys/class/usbpd/usbpd0/initial_pr
    chown system system /sys/class/usbpd/usbpd0/pdo1
    chown system system /sys/class/usbpd/usbpd0/pdo2
    chown system system /sys/class/usbpd/usbpd0/pdo3
    chown system system /sys/class/usbpd/usbpd0/pdo4
    chown system system /sys/class/usbpd/usbpd0/pdo5
    chown system system /sys/class/usbpd/usbpd0/pdo6
    chown system system /sys/class/usbpd/usbpd0/pdo7
    chown system system /sys/class/usbpd/usbpd0/pdo_h
    chown system system /sys/class/usbpd/usbpd0/power
    chown system system /sys/class/usbpd/usbpd0/rdo
    chown system system /sys/class/usbpd/usbpd0/rdo_h
    chown system system /sys/class/usbpd/usbpd0/select_pdo
    chown system system /sys/class/usbpd/usbpd0/src_cap_id
    chown system system /sys/class/usbpd/usbpd0/subsystem
    chown system system /sys/class/usbpd/usbpd0/uevent

    chown system system /sys/class/qcom-battery/fcc_stepping_in_progress
    chown system system /sys/class/qcom-battery/parallel_pct
    chown system system /sys/class/qcom-battery/restrict_chg
    chown system system /sys/class/qcom-battery/restrict_cur
    chown system system /sys/class/qcom-battery/version

service vendor.hvdcp_opti /vendor/bin/hvdcp_opti
    class main
    user system
    group system wakelock
    capabilities BLOCK_SUSPEND WAKE_ALARM
